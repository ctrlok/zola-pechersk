<!DOCTYPE html>
<html lang="{{ lang }}"

    {% set color_scheme = config.extra.color_scheme | default(value="auto") %}
    color-scheme="{{ color_scheme }}"
    {% if config.extra.flavor %}
      flavor="{{ config.extra.flavor }}"
    {% endif %}
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ config.title }}</title>

    {% if page.description %}
    <meta name="description" content="{{ page.description }}">
    {% elif section.description %}
    <meta name="description" content="{{ section.description }}">
    {% elif config.description %}
    <meta name="description" content="{{ config.description }}">
    {% endif %}

    <!-- Open Graph metadata -->
    <meta property="og:type" content="{% if page %}article{% else %}website{% endif %}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }}{% elif section.title %}{{ section.title }}{% else %}{{ config.title }}{% endif %}">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% elif section.description %}{{ section.description }}{% elif config.description %}{{ config.description }}{% endif %}">
    <meta property="og:url" content="{% if page %}{{ page.permalink }}{% elif section %}{{ section.permalink }}{% else %}{{ config.base_url }}{% endif %}">
    {% if page.extra.og_image %}
    <meta property="og:image" content="{{ page.extra.og_image }}">
    {% elif config.extra.og_image %}
    <meta property="og:image" content="{{ config.extra.og_image }}">
    {% endif %}
    <meta property="og:site_name" content="{{ config.title }}">

    <!-- Twitter Card metadata -->
    <meta name="twitter:card" content="{% if page.extra.og_image or config.extra.og_image %}summary_large_image{% else %}summary{% endif %}">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% elif section.title %}{{ section.title }}{% else %}{{ config.title }}{% endif %}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% elif section.description %}{{ section.description }}{% elif config.description %}{{ config.description }}{% endif %}">
    {% if page.extra.og_image %}
    <meta name="twitter:image" content="{{ page.extra.og_image }}">
    {% elif config.extra.og_image %}
    <meta name="twitter:image" content="{{ config.extra.og_image }}">
    {% endif %}
    {% if config.extra.twitter_username %}
    <meta name="twitter:site" content="{{ config.extra.twitter_username }}">
    <meta name="twitter:creator" content="{{ config.extra.twitter_username }}">
    {% endif %}

    {% if config.extra.favicon %}
        {% if config.extra.favicon is starting_with("http") %}
            <link rel="icon" href="{{ config.extra.favicon }}">
        {% else %}
            <link rel="icon" href="{{ get_url(path=config.extra.favicon) }}">
        {% endif %}
    {% endif %}

    <!-- Custom styles -->
    <link rel="stylesheet" href="{{ get_url(path="style.css") }}">
    <link rel="stylesheet" href="{{ get_url(path="override.css") }}">

    {% if config.extra.analytics and config.extra.analytics.enabled and config.extra.analytics.umami %}
    <!-- Umami Analytics -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="{{ config.extra.analytics.umami.website_id }}"></script>
    {% endif %}
    {% include "partials/header.html" %}

</head>
<body>
    {% if config.extra.theme_switcher %}
    <div class="theme-switcher" id="theme-switcher">
        <div class="switcher-content">
            <div class="switcher-section">
                <span class="switcher-label">Theme:</span>
                <div class="switcher-buttons">
                    <button class="switcher-button" data-theme="auto">Auto</button>
                    <button class="switcher-button" data-theme="light">Light</button>
                    <button class="switcher-button" data-theme="dark">Dark</button>
                </div>
            </div>
            <div class="switcher-section">
                <span class="switcher-label">Flavor:</span>
                <div class="switcher-buttons">
                    <button class="switcher-button" data-flavor="monochrome">Mono</button>
                    <button class="switcher-button" data-flavor="deep-headers">Deep</button>
                    <button class="switcher-button" data-flavor="deep">Deep+</button>
                    <button class="switcher-button" data-flavor="happy-headers">Happy</button>
                    <button class="switcher-button" data-flavor="happy">Happy+</button>
                </div>
            </div>
        </div>
    </div>
    <button class="theme-switcher-toggle" id="theme-switcher-toggle" title="Toggle theme switcher">âš™</button>
    {% endif %}

    <div class="container">
        <header>
            <div class="header-content">
                {% if config.extra.menu %}
                <nav class="main-nav">
                    <ul class="nav-menu">
                        {% for item in config.extra.menu %}
                            <li class="nav-item">
                                <a href="{{ item.url }}" class="nav-link">{{ item.name }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </nav>
                {% endif %}
            </div>
        </header>

        <main>
            <article>
                {% block content %}{% endblock %}
            </article>
        </main>

        <footer>
            {% include "partials/footer.html" %}
        </footer>
    </div>

    <!-- Custom JavaScript -->
    <script src="{{ get_url(path="js/footnotes.js") }}"></script>
    <script src="{{ get_url(path="js/main.js") }}"></script>

</body>
</html>
